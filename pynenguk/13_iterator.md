
## Ітератори, ітеровані об'єкти

---
## Ітерований об'єкт

Ітерований об'єкт (iterable) - це об'єкт, який здатний повертати елементи по
одному. Також це об'єкт, з якого можна отримати ітератор.

Приклади ітерованих об'єктів:

* список, рядок, кортеж
* словники
* файли

---
## Ітерований об'єкт

Ітерований об'єкт (iterable) - це об'єкт, який здатний повертати елементи по
одному. Також це об'єкт, з якого можна отримати ітератор.

Приклади ітерованих об'єктів:

* список, рядок, кортеж
* словники
* файли


Ітератор (iterator) – це об'єкт, який повертає свої елементи по одному
за один раз.

Ітератор запам'ятовує, на якому об'єкті зупинився в останню ітерацію.

---
## Ітерований об'єкт

В Python за отримання ітератора відповідає функція iter:

```python
In [1]: lista = [1, 2, 3]

In [2]: iter(lista)
Out[2]: <list_iterator at 0xb4ede28c>
```

Функція iter відпрацює на будь-якому об'єкті, який має метод `__iter__`
або метод `__getitem__`.

Метод `__iter__` повертає ітератор. Якщо цього методу немає, функція
iter перевіряє, чи немає методу `__getitem__` - методу, який дозволяє
отримувати елементи індексу.

Якщо метод `__getitem__` є, повертається ітератор, який проходить
елементами, використовуючи індекс (починаючи з 0).

---
## Ітератори

Ітератор (iterator) – це об'єкт, який повертає свої елементи по одному
за один раз.

З точки зору Python - це будь-який об'єкт, який має метод `__next__`. Цей метод
повертає наступний елемент, якщо він є, або повертає виняток `StopIteration`,
коли елементи закінчилися.

Крім того, ітератор запам'ятовує, на якому об'єкті зупинився в останню ітерацію.

У Python у кожного ітератора є метод `__iter__` - тобто, будь-який ітератор є
ітерованим об'єктом. Цей метод повертає сам ітератор.


---
## Итераторы

Пример создания итератора из списка:
```python
In [3]: numbers = [1, 2, 3]

In [4]: i = iter(numbers)
```

Теперь можно использовать функцию next(), которая вызывает метод
``__next__``, чтобы взять следующий элемент:

```python
In [5]: next(i)
Out[5]: 1

In [6]: next(i)
Out[6]: 2

In [7]: next(i)
Out[7]: 3

In [8]: next(i)
------------------------------------------------------------
StopIteration              Traceback (most recent call last)
<ipython-input-8-bed2471d02c1> in <module>()
----> 1 next(i)

StopIteration:
```

После того, как элементы закончились, возвращается исключение
StopIteration.

---
## Итераторы

Для того, чтобы итератор снова начал возвращать элементы, его надо
заново создать.

Аналогичные действия выполняются, когда цикл for проходится по списку:

```python
In [9]: for item in numbers:
   ...:     print(item)
   ...:
1
2
3
```

Когда мы перебираем элементы списка, к списку сначала применяется
функция iter(), чтобы создать итератор, а затем вызывается его метод
``__next__`` до тех пор, пока не возникнет исключение StopIteration.

Итераторы полезны тем, что они отдают элементы по одному. Например, при
работе с файлом это полезно тем, что в памяти будет находиться не весь
файл, а только одна строка файла.

